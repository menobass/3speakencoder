# 3Speak Encoder Configuration
# Copy this file to .env and fill in your actual values
# ‚ö†Ô∏è  NEVER commit your .env file to version control!

# Hive Account Configuration (required)
HIVE_USERNAME=your-hive-username

# üö® CRITICAL: DID Identity Authentication Key (REQUIRED for persistent identity)
ENCODER_PRIVATE_KEY=generate-and-paste-your-key-here

# ‚ö†Ô∏è  WITHOUT THIS KEY:
#     ‚Ä¢ Your encoder gets a new identity on every restart
#     ‚Ä¢ Dashboard tracking breaks (shows "new encoder" each time)
#     ‚Ä¢ Job attribution doesn't persist across sessions
# 
# üîß TO GENERATE A NEW KEY:
#     Run: node -e "console.log('ENCODER_PRIVATE_KEY=' + require('crypto').randomBytes(32).toString('base64'))"
#     Copy the output here and replace the placeholder above
# 
# ‚úÖ This creates your DID identity for JWS signatures
# ‚úÖ This is NOT your Hive private key
# ‚úÖ This is only for encoder-gateway authentication  
# ‚úÖ Keep this secret - never share publicly
# ‚úÖ Same key = same encoder identity forever

# Gateway Configuration
GATEWAY_URL=https://encoder.3speak.tv
QUEUE_MAX_LENGTH=1
QUEUE_CONCURRENCY=1
ASYNC_UPLOADS=false
REMOTE_GATEWAY_ENABLED=true

# IPFS Configuration
IPFS_API_ADDR=/ip4/127.0.0.1/tcp/5001

# 3Speak IPFS Infrastructure (critical for uploads)
THREESPEAK_IPFS_ENDPOINT=http://65.21.201.94:5002

# IPFS Cluster Support (optional - reduces main daemon load)
USE_CLUSTER_FOR_PINS=false
IPFS_CLUSTER_ENDPOINT=http://65.21.201.94:9094

# Local Fallback Pinning (optional - for 3Speak-operated encoder nodes)
ENABLE_LOCAL_FALLBACK=false
LOCAL_FALLBACK_THRESHOLD=3
REMOVE_LOCAL_AFTER_SYNC=true

# Encoder Configuration
TEMP_DIR=./temp
FFMPEG_PATH=/usr/bin/ffmpeg
HARDWARE_ACCELERATION=true
MAX_CONCURRENT_JOBS=1

# Node Configuration
NODE_NAME=3speak-encoder-node

# Direct API Configuration (optional - for miniservice integration)
DIRECT_API_ENABLED=false
DIRECT_API_PORT=3002
# üîê Generate a secure random key if enabling direct API:
# DIRECT_API_KEY=generate-a-long-random-secure-key-here
# ‚ö†Ô∏è  Keep this secret - it controls access to your encoder API!

# MongoDB Direct Verification (DISABLED by default)
# üö® CRITICAL: Only enable this for 3Speak infrastructure nodes
# üîê This provides direct database verification when gateway APIs fail
# üîê Requires MongoDB credentials - contact 3Speak team for access
MONGODB_VERIFICATION_ENABLED=false
# MONGODB_URI=mongodb://username:password@host:port/database
# DATABASE_NAME=spk-encoder-gateway
# MONGODB_CONNECTION_TIMEOUT=10000
# MONGODB_SOCKET_TIMEOUT=30000

# =================================================================
# GATEWAY AID FALLBACK (APPROVED COMMUNITY NODES ONLY)
# =================================================================
# Gateway Aid provides REST API fallback when websocket/gateway APIs fail
# 
# ‚ö†Ô∏è  REQUIRES APPROVAL: Your DID key must be registered with 3Speak
# ‚ö†Ô∏è  Contact 3Speak team to request Gateway Aid access
# 
# This is NOT available by default - only for approved community encoders
# Infrastructure nodes should use MongoDB fallback instead (MONGO_URI)
#
# When enabled, if gateway websocket or APIs fail, encoder will automatically
# switch to REST API endpoints for job claiming, progress updates, and completion
#
GATEWAY_AID_ENABLED=false
# GATEWAY_AID_BASE_URL=https://gateway-monitor.3speak.tv/aid/v1